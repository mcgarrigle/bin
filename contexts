declare -A CONTEXTS 

CONTEXTS[default]=unix:///var/run/docker.sock
CONTEXTS[swole]=unix:///var/run/docker.sock
CONTEXTS[smol]=ssh://node21.mac.wales

function _list_contexts {
  echo "current: $CURRENT_CONTEXT $DOCKER_HOST"
  echo
  for KEY in ${!CONTEXTS[@]}; do
    echo "${KEY} => ${CONTEXTS[$KEY]}"
  done
}

function _set_context {
  if [ -z ${CONTEXTS[$1]} ]; then
    echo "$1 not known"
  else
    export CURRENT_CONTEXT="$1"
    export DOCKER_HOST=${CONTEXTS[$CURRENT_CONTEXT]}
  fi
}  

function context {
  if [ -z "$1" ]; then
    _list_contexts
  else
    _set_context "$1"
    echo $CURRENT_CONTEXT $DOCKER_HOST
  fi
}

_set_context "default"
